"use strict";$(function(){var a=0;s(1);var c=!1;function t(i){var n=JSON.parse(i);console.log(n);var s=n.goodlist2.map(function(i){return'<li data-id="'+i.gid+'">\n                                <a href="javascript:;">\n                                    <img src="../images/'+i.img+'" alt="" class="push" />\n                                    <div style="padding-left:5px;height:40px;border-bottom:1px solid #ccc" class="clearfix">\n                                        <span>欧洲</span><span>自营</span>\n                                    </div>\n                                    <p>'+i.goodname+"</p>\n                                    <h4>￥"+i.price+'</h4>\n                                    <p style="height:20px;display:none;" class="hide">\n                                        <em class="fl">仅剩<span class="gdnum">'+i.goodnum+'</span>件</em>\n                                        <span class="fr"><i></i>收藏<b>人气:'+i.love+'</b></span>\n                                    </p>\n                                </a>\n                                <div class="posi">\n                                    <a href="javascript:;">S</a><a href="javascript:;">M</a><a href="javascript:;">L</a>\n                                </div>\n                                <div class="cimsrc">\n                                    <i><img src="../images/dt1.jpg"/></i>\n                                    <i><img src="../images/dt2.jpg"/></i>\n                                </div>   \n                            </li>'});$(".commodity-list ul").html(s),a=c?Math.ceil(n.len2/n.num):Math.ceil(n.len/n.num),$(".product_control_page span").html("<b>"+n.page+"</b> / "+a)}function s(i,n,s){$.post("../api/list.php",{num:8,page:i,odwhat:n,upordown:s},function(i){t(i)})}function o(i,n,s,a){$.post("../api/list.php",{num:8,page:i,min:n,max:s,upordown:a},function(i){JSON.parse(i).goodlist2.map(function(i){return'<li data-id="'+i.gid+'">\n                                <a href="javascript:;">\n                                    <img src="../images/'+i.img+'" alt="" class="push" />\n                                    <div style="padding-left:5px;height:40px;border-bottom:1px solid #ccc" class="clearfix">\n                                        <span>欧洲</span><span>自营</span>\n                                    </div>\n                                    <p>'+i.goodname+"</p>\n                                    <h4>￥"+i.price+'</h4>\n                                    <p style="height:20px;display:none;" class="hide">\n                                        <em class="fl">仅剩<span class="gdnum">'+i.goodnum+'</span>件</em>\n                                        <span class="fr"><i></i>收藏<b>人气:'+i.love+'</b></span>\n                                    </p>\n                                </a>\n                                <div class="posi">\n                                    <a href="javascript:;">S</a><a href="javascript:;">M</a><a href="javascript:;">L</a>\n                                </div>\n                                <div class="cimsrc">\n                                    <i><img src="../images/dt1.jpg"/></i>\n                                    <i><img src="../images/dt2.jpg"/></i>\n                                </div>   \n                            </li>'});t(i)})}function n(i,n){$.post("../api/list.php",{num:8,page:i,detail:n},function(i){t(i)})}$(".product_control_price").hover(function(){$(this).css("overflow","inherit"),$(this).children("div").addClass("on")},function(){$(this).css("overflow",""),$(this).children("div").removeClass()}),$(".commodity-list ul").on("mouseover","li",function(){$(this).css("z-index","99"),$(this).children().find("p.hide").css("display","block"),$(this).children(".posi").css("display","block"),$(this).children(".cimsrc").css("display","block")}),$(".commodity-list ul").on("mouseout","li",function(){$(this).css("z-index","1"),$(this).children().find("p.hide").css("display","none"),$(this).children(".posi").css("display","none"),$(this).children(".cimsrc").css("display","none")}),$(".commodity-list ul").on("mouseover",".cimsrc i",function(){var i=$(this).parent().parent(),n=i.data("id");1==$(this).index()?i.find(".push").attr("src","../images/ed2.jpg"):i.find(".push").attr("src","../images/ed"+n+".jpg")}),$(".commodity-list ul").on("click","li",function(){window.open("detail.html?"+$(this).data("id"))});var e=!1;$(".ctrllist li.order").on("click",function(){$(this).children("a").addClass("on"),$(this).siblings().children("a").removeClass("on"),5==$(this).index()&&(e=!e,$(this).children("a").toggleClass("down"))});var l=!1,r=!1,p=!1;$(".ctrllist li").on("click",function(){if(0==$(this).index()&&(l=r=c=!1,s(1)),1==$(this).index()&&(objk=!0,r=!(l=!0),s(1,"love","ASC")),5==$(this).index()){objk=!0,r=!0;var i=$("#customSPr").val(),n=$("#customEPr").val();e?d?o(1,i,n,"ASC"):s(1,"price","ASC"):d?o(1,i,n,"DESC"):(s(1,"price","DESC"),p=!0)}});var d=!1;$(".enter").on("click",function(){var i=$("#customSPr").val(),n=$("#customEPr").val();i&&n?(d=!0,o(1,i,n,"ASC")):alert("请输入最大值跟最小值")});var h=!1;function m(i){h&&n(i,$("#expKey1").val()),d&&o(i,min,max,"ASC"),l&&s(i,"love","ASC"),r&&s(i,"price",p?"DESC":"ASC"),c||s(i)}$(".goBtn").on("click",function(){$("#expKey1").val()&&(h=c=!0,n(1,$("#expKey1").val()))}),$(".page-prev").on("click",function(){var i=$(".product_control_page span b").text();1<i&&m(--i)}),$(".page-next").on("click",function(){var i=$(".product_control_page span b").text();i<a&&m(++i)}),$(".nav").on("mouseover",".nav2",function(){$(this).css("background-image","url(../images/hovarrow.png)").siblings().css("background-image",""),$(this).children("div").addClass("active"),$(this).siblings().children("div").removeClass("active")}),$(".nav").on("mouseout",".nav2",function(){$(".nav2 .nav-list").removeClass("active"),$(".nav .nav2").css("background-image","")})});